

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Time-series forecasting for a payment processing company - Hudanyun Sheng / Data Scientist</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Hudanyun Sheng / Data Scientist">
<meta property="og:title" content="Time-series forecasting for a payment processing company">


  <link rel="canonical" href="http://localhost:4000/portfolio/portfolio-project9/">
  <meta property="og:url" content="http://localhost:4000/portfolio/portfolio-project9/">



  <meta property="og:description" content="May 2023 This project is actually a pre-interview project for data scientist. I have got a chance to perform data analysis and time-series modeling and forecasting. ">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2024-03-22T15:21:50+08:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Hudanyun Sheng",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<!-- <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Hudanyun Sheng / Data Scientist Feed"> -->

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="http://localhost:4000/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="http://localhost:4000/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="http://localhost:4000/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="http://localhost:4000/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="http://localhost:4000/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.css"/>


<!-- Support for MatJax -->
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <!-- <a href="/" class="site-logo">
            <img src="/assets/images/logo.png" alt="Hudanyun Sheng / Data Scientist logo">
          </a>           -->
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/">Hudanyun Sheng / Data Scientist</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/cv/">CV</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/portfolio/">Portfolio</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/year-archive/">Blog Posts</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="http://localhost:4000/images/profile2.jpg" class="author__avatar" alt="Hudanyun Sheng">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Hudanyun Sheng</h3>
    <p class="author__pronouns">she/her (Dannie)</p>
    <p class="author__bio">Data Scientist | Machine Learning | Computer Vision | AI</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      <!-- Font Awesome icons / Biographic information  -->
      
        <li><i class="fa-solid fa-location-dot icon-pad-right" aria-hidden="true"></i>Beijing, China</li>
      
      
      
      
        <li><a href="mailto:hudanyun.sheng@outlook.com"><i class="fas fa-fw fa-envelope icon-pad-right" aria-hidden="true"></i>Email</a></li>
      

      <!-- Font Awesome and Academicons icons / Academic websites -->
            
      
      
      
                              
      

      <!-- Font Awesome icons / Repositories and software development -->
      
            
            
      
        <li><a href="https://github.com/DannieSheng"><i class="fab fa-fw fa-github icon-pad-right" aria-hidden="true"></i>Github</a></li>
      
            
            

      <!-- Font Awesome icons / Social media -->
      
      
            
      
                  
                  
      
            
            
      
        <li><a href="https://www.linkedin.com/in/https://www.linkedin.com/in/hudanyunsheng/"><i class="fab fa-fw fa-linkedin icon-pad-right" aria-hidden="true"></i>LinkedIn</a></li>
            
      
            
                  
            
      
            
            
      
              
      
                      
      
      
            
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Time-series forecasting for a payment processing company">
    <meta itemprop="description" content="May 2023 This project is actually a pre-interview project for data scientist. I have got a chance to perform data analysis and time-series modeling and forecasting. ">
    <meta itemprop="datePublished" content="March 22, 2024">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Time-series forecasting for a payment processing company
</h1>
          
        
        
        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2024-03-22T15:21:50+08:00">March 22, 2024</time></p>
            
        </header>
      

      <section class="page__content" itemprop="text">
        <h2 id="background">Background</h2>
<p>The business team of a payment processing company is interested in GMV (Gross Merchandise Value: the sum of transaction amounts over a period of time) forecasting. 
GMV can be defined per store (the seller), per user (the purchaser), or for the company as a whole (across all users and stores).</p>

<h2 id="tasks">Tasks</h2>
<ol>
  <li>Perform an EDA (exploratory data analysis) to highlight patterns in the data</li>
  <li>Forecast GMV for <strong>each user</strong> for the month of January 2022</li>
  <li>Forecast GMV for <strong>the company as a whole</strong> for each date in the month of January 2022</li>
</ol>

<h2 id="data">Data</h2>
<p><strong>transactions</strong>: all transactions for years 2020 and 2021.<br />
<code class="language-plaintext highlighter-rouge">user_id</code>: the user ID <br />
<code class="language-plaintext highlighter-rouge">store_id</code>: store ID<br />
<code class="language-plaintext highlighter-rouge">event_occurance</code>: the datetime of the transaction<br />
<code class="language-plaintext highlighter-rouge">amount</code>: the amount of the transaction in yen</p>

<p><strong>stores</strong>: characteristics for each store.
<code class="language-plaintext highlighter-rouge">nam</code>: prefecture<br />
<code class="language-plaintext highlighter-rouge">laa</code>: local administrative area<br />
<code class="language-plaintext highlighter-rouge">category</code>
<code class="language-plaintext highlighter-rouge">lat</code>: location in latitude<br />
<code class="language-plaintext highlighter-rouge">lon</code>: location in longitude</p>

<p><strong>users</strong>: characteristics for each user <br />
<code class="language-plaintext highlighter-rouge">gender</code><br />
<code class="language-plaintext highlighter-rouge">age</code>: age as of December 31, 2021</p>

<h2 id="data-analysis-modeling-and-prediction">Data Analysis, Modeling, and Prediction</h2>
<h3 id="eda">EDA</h3>
<h4 id="transaction-data-transactions">Transaction data (<strong>transactions</strong>)</h4>
<ol>
  <li>Contains transaction data from 2020-01-01 to 2021-12-31, made by 9542 unique users,
with products provided by 95460 unique stores.</li>
  <li>An overall increasing trend was observed for daily total transaction amount (daily GMV for the whole company). However, the daily average transaction remains steady with bouncing. This is explained by the observation that the daily transaction numbers is increasing.</li>
  <li>A weekday related pattern of total transaction amount is also observed - total transaction amount distributions differ in weekdays and weekends.
    <h4 id="user-data-users">User data (<strong>users</strong>)</h4>
  </li>
  <li>There are 9961 unique users originally, 8965 without missing data (nans).</li>
  <li>Almost 60% of active users are male; the ages of users range from 15 to 90 with an median of 52 years old.</li>
  <li>Considering each user’s average daily purchase amount, we did observe that different genders and different age groups behave slightly differently.
    <h4 id="store-data-stores">Store data (<strong>stores</strong>)</h4>
  </li>
  <li>There are 99991 unique stores with 17 different categories.</li>
  <li>By taking a look at the relationship between daily transaction amount and category, an obvious relationship in between is observed.</li>
</ol>

<h3 id="modeling-and-forecasting-gmv-for-each-user-for-january-2022">Modeling and Forecasting GMV for <strong>each user</strong> for January 2022</h3>
<p>To forecast GMV for each user, I proposed to use a <strong>user churn</strong> based method - group users into several groups, and make prediction for each group.
The reason is that the prediction for each user is traivia and not informative - we care about the company as a whole, and knowing our customer groups is of greater importance.</p>

<p>The RFM model defines users to different level based on 3 scores: <em>Recency</em> (to the end of year 2022), <em>Frequency</em> and <em>Monetary</em>.<br />
By default, the RFM scores can be calcualted and the users can be grouped into 8 groups based on the scores. But we can use the RFM values as features in our modeling.</p>

<p>As has been observed in previous steps, products’ categories play a vital role in final transaction amount. 
So I proposed to use the ratios of each category’s purchasing amount to the monthly purchasing total to define each user.</p>

<p>Then, a <strong>k-means clustering</strong> method is used to cluster users into 7 clusters (the value of k is determined by silhouette score combined with the elbow method).</p>

<p>Finally, I proposed to use the last value of the historical average monthly GMV for each user as a forecast for the coming January.</p>

<p>Alternatively, a time-series forecasting model can be build for each cluster to predict the coming month in 2022.</p>

<h3 id="modeling-and-forecast-gmv-for-the-company-as-a-whole-for-each-date-in-january-2022">Modeling and Forecast GMV for <strong>the company as a whole</strong> for <strong>each date</strong> in January 2022</h3>
<p>Forecasting GMV for each date for the whole company is a whole new story compared to the previous task. 
I proposed to use time-series forecasting modeling.</p>

<p>As observed in the EDA, there is a correlation between weekday and the total GMV amount.<br />
This observation is substaintiated by checking the seasonality, of the data - “There is seasonality of order 7”.</p>

<p>With available historical data, I split data into train and validation, and tried several models: “naive”, “exponential”, “arima”, “theta”, “prophet”. 
Based on the performance on validation data, I chose the “prophet” model as my final time-series forecasting model and made the forecasts for each date in January 2022 for the company.</p>

<p>Checkout the <a href="https://github.com/DannieSheng/Professional_Portfolio/tree/main/PaypayCoding%20Challenge">github repo</a> of this project for detailed scripts.</p>


        

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/portfolio/portfolio-project9/" class="btn btn--twitter" title="Share on Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/portfolio/portfolio-project9/" class="btn btn--facebook" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/portfolio/portfolio-project9/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="http://localhost:4000/portfolio/portfolio-project8/" class="pagination--pager" title="Automated Prescription Parsing API development, maintain, and improvement (for the Japanese Market)
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<!-- <a href="/sitemap/">Sitemap</a> -->
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    <!-- 
      <li><strong>Follow:</strong></li>
     -->
    
    
    
      <li><a href="http://github.com/DannieSheng"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <!-- <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> -->
  </ul>
  
</div>

<div class="page__footer-copyright">&copy; 2024 Hudanyun Sheng.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

